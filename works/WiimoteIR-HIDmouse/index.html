<!DOCTYPE html>
<html>
  <head>
    <meta name="theme-color" content="#f47120">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" charset="utf-8">

    <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.6.0/build/styles/tomorrow-night-blue.min.css">
    <script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.6.0/build/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <link href="/css/lnln.css" rel="stylesheet">

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@lnln_ch">
    <!--置換用タグ1-->
    <meta property="og:url" content="https://lnln.dev/works/WiimoteIR-HIDmouse"> <!--記事のurlをかいて-->
    <meta property="og:title" content="りんりん - WiimoteIR-HIDmouse"> <!--記事のtitleをかいて-->
    <!--置換用タグ2-->
    <meta property="og:description" content="趣味の工作の記録">
    <meta property="og:image" content="https://lnln.dev/works/WiimoteIR-HIDmouse/small-003.jpg">

    <title>WiimoteIR-HIDmouse</title>
  </head>

<body ontouchstart=""><div class="main">
<header>
  <a href="https://lnln.dev"><h1>りんりん</h1></a>
</header>

<div class="sections">
  <a class="linkbutton" href="/">homeに戻る</a><a class="linkbutton" href="../LowCostFilamentBox/"><</a><a class="linkbutton" href="../mech-horse/">></a>

  <section>
    <h2>WiimoteIR-HIDmouse</h2>
    <h3>概要</h3>
    <figure><a href="003.jpg"><img src="small-003.jpg"></a><figcaption>本体</figcaption></figure>
    <p>
      WiiリモコンのIRセンサを利用したマウス。Wiiリモコンのように画面に向けてマウスを操作できる。HIDデバイスなので、どのコンピュータでもUSBで接続するだけですぐに利用できる。ケースは光造形3Dプリンタで作成した。
    </p>

    <h3>利用している様子</h3>

    <blockquote class="twitter-tweet">
      <p lang="ja" dir="ltr">wiiリモコンみたいなマウス、完成しました <a href="https://t.co/yuGPl4Wm0K">pic.twitter.com/yuGPl4Wm0K</a></p>
      &mdash; りんりん (@lnln_ch) <a href="https://twitter.com/lnln_ch/status/1626096029157453824?ref_src=twsrc%5Etfw">February
        16, 2023</a>
    </blockquote>
    <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

    <h3>Wiiリモコンのしくみ</h3>

    <p>
      Wiiリモコンが動作するためにはセンサーバーが必要である。このセンサーバーは、名前とは反して、センサーはついていない。センサーバーには赤外線のLEDがついており、Wiiリモコンはその光をカメラで見ることで、リモコンの向いている方向を調べている。
    </p>
    <p>
      今回のマウスも同様に、センサーバーの代わりとなる赤外線発光部が必要になる。センサーバーは両端にLEDがついており、2点を捉えることでカーソルの角度や距離が取得できるが、マウスカーソルはWiiと異なりそれらは必要ないため、赤外線発光部は1点のみにし、つぎのようなコンパクトな作りにした。明るさ確保のためLEDを3つ付けたが、センサに捉えられるのは1点だ。利用したのはタカチのボタン電池ボックスつきのケースである。(<a target="_blank" href="https://www.takachi-el.co.jp/products/CS">https://www.takachi-el.co.jp/products/CS</a>)
    </p>

    <figure><a href="002.jpg"><img src="small-002.jpg"></a><figcaption>赤外線発光部(Wiiのセンサーバーにあたる)</figcaption></figure>



    <h3>WiiリモコンのIRセンサをマイコンで利用する</h3>
    <figure><a href="circ1.png"><img src="small-circ1.jpg"></a><figcaption>回路図</figcaption></figure>
    <p>
      WiiモーションplusがないモデルのWiiリモコンのセンサはI2Cで利用できる。今回はこれをArduino Pro Microに接続した。センサの利用方法について、詳しくはkako氏のサイトが参考になる。(<a target="_blank" href="http://www.kako.com/neta/2007-001/2007-001.html">http://www.kako.com/neta/2007-001/2007-001.html</a>)
    </p>

    <p>
      ArduinoおよびESP32向けにしょっぱいライブラリを作ったので公開する。<a target="_blank" href="https://github.com/ybasviel/wiiIRcam">https://github.com/ybasviel/wiiIRcam</a>
    </p>

    <pre><code>
#include &lt;wiiIRcam.h&gt;
#define SENSITIVITY 2
  
wiiIRcam cam;
  
void setup(){
  Serial.begin(115200);
  cam.begin(SENSITIVITY); // You can omit SENSITIVITY
}
  
void loop(){
  char str[128];
  
  if( cam.get() ){
    sprintf(str, "%d,%d,%d,%d,%d,%d,%d,%d\n", cam.x1, cam.y1, cam.x2, cam.y2, cam.x3, cam.y3, cam.x4, cam.y4);
    Serial.print(str);
  }
}
    </code></pre>

  </section>
  
  <div class="share">
    <a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class="twitter-share-button" data-size="large" data-via="lnln_ch" data-show-count="false">Tweet</a><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
  </div>

</div>


<footer><address>Made by lnln_ch</address></footer>
</div></body></html>
